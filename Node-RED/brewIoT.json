[{"id":"2775c3f5.a41fec","type":"tab","label":"Control Panel","disabled":false,"info":""},{"id":"1963aa58.852a6e","type":"tab","label":"Brewer MGMT","disabled":false,"info":""},{"id":"1775ac36.40b604","type":"tab","label":"Stocker MGMT","disabled":false,"info":""},{"id":"d9ce3705.0896e8","type":"tab","label":"Recipy MGMT","disabled":false,"info":""},{"id":"eb70a2db.e5dff8","type":"ui_group","name":"Sensor ","tab":"3d7d59e1.c8a1b6","order":1,"disp":true,"width":"24","collapse":false},{"id":"fabfe973.03c8c8","type":"ui_group","name":"Sensor","tab":"3d7d59e1.c8a1b6","order":5,"disp":true,"width":"24","collapse":false},{"id":"64ca876e.d398d","type":"ui_group","name":"Temperature1","tab":"3d7d59e1.c8a1b6","order":3,"disp":true,"width":"8","collapse":false},{"id":"fdb48cc9.da934","type":"ui_group","name":"Battery1","tab":"3d7d59e1.c8a1b6","order":2,"disp":true,"width":"8","collapse":false},{"id":"660c9234.76adf4","type":"ui_group","name":"Humidity1","tab":"3d7d59e1.c8a1b6","order":4,"disp":true,"width":"8","collapse":false},{"id":"1d57995e.6e59f7","type":"ui_group","name":"Battery2","tab":"3d7d59e1.c8a1b6","order":6,"disp":true,"width":"8","collapse":false},{"id":"5ee1d637.ebe958","type":"ui_group","name":"Humidity2","tab":"3d7d59e1.c8a1b6","order":8,"disp":true,"width":"8","collapse":false},{"id":"b12e57cd.073348","type":"ui_group","name":"Temperature2","tab":"3d7d59e1.c8a1b6","order":7,"disp":true,"width":"8","collapse":false},{"id":"3d7d59e1.c8a1b6","type":"ui_tab","name":"Project","icon":"dashboard","order":1,"disabled":false,"hidden":false},{"id":"2c1bb9a4.50a83e","type":"ui_base","theme":{"name":"theme-light","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"},"themeState":{"base-color":{"default":"#0094CE","value":"#0094CE","edited":false},"page-titlebar-backgroundColor":{"value":"#0094CE","edited":false},"page-backgroundColor":{"value":"#fafafa","edited":false},"page-sidebar-backgroundColor":{"value":"#ffffff","edited":false},"group-textColor":{"value":"#1bbfff","edited":false},"group-borderColor":{"value":"#ffffff","edited":false},"group-backgroundColor":{"value":"#ffffff","edited":false},"widget-textColor":{"value":"#111111","edited":false},"widget-backgroundColor":{"value":"#0094ce","edited":false},"widget-borderColor":{"value":"#ffffff","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey","palette":"light"}},"site":{"name":"Node-RED Dashboard","hideToolbar":"false","allowSwipe":"false","lockMenu":"false","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"ad1cf099.28def","type":"influxdb","d":true,"hostname":"127.0.0.1","port":"8086","protocol":"http","database":"PROVA","name":"PROVA","usetls":false,"tls":"","influxdbVersion":"1.x","url":"http://localhost:8086","rejectUnauthorized":true},{"id":"b750acbb.e73dc8","type":"mqtt-broker","name":"Broker","broker":"broker.hivemq.com","port":"1883","tls":"c656faed.f9e1","clientid":"","usetls":false,"protocolVersion":"5","keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthRetain":"false","birthPayload":"","birthMsg":{},"closeTopic":"","closeQos":"0","closeRetain":"false","closePayload":"","closeMsg":{},"willTopic":"","willQos":"0","willRetain":"false","willPayload":"","willMsg":{},"sessionExpiry":""},{"id":"b3b7d5e1.546838","type":"openhab2-controller2","d":true,"name":"openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3","token":""},{"id":"9689f8a1.af8ea","type":"openhab2-controller2","d":true,"name":"openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3","token":""},{"id":"c710f566.06a22","type":"openhab2-controller2","d":true,"name":"openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3","token":""},{"id":"bceeeef.93a889","type":"openhab2-controller2","d":true,"name":"openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3","token":""},{"id":"a55bff94.e1293","type":"openhab2-controller2","d":true,"name":"openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3","token":""},{"id":"e0d3e3b9.b06108","type":"openhab2-controller2","d":true,"name":"openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3","token":""},{"id":"a8c81c6f.42e8f","type":"serial-port","serialport":"/dev/ttyUSB0","serialbaud":"115200","databits":"8","parity":"none","stopbits":"1","waitfor":"","dtr":"none","rts":"none","cts":"none","dsr":"none","newline":"\\n","bin":"false","out":"char","addchar":"","responsetimeout":"10000"},{"id":"656348db.ce3088","type":"mqtt-broker","name":"","broker":"broker.hivemq.com","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"6eb1f835.b5465","type":"ui_tab","name":"Fabrizio Project","icon":"dashboard","disabled":false,"hidden":false},{"id":"17bb07b8.1fcdc8","type":"ui_group","name":"Room 2","tab":"6eb1f835.b5465","order":2,"disp":true,"width":24,"collapse":false},{"id":"f990419e.8647e8","type":"openhab2-controller2","name":"OpenHab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3","token":""},{"id":"25c95450.a03ef4","type":"serial-port","serialport":"/dev/ttyUSB0","serialbaud":"115200","databits":"8","parity":"none","stopbits":"1","waitfor":"","dtr":"none","rts":"none","cts":"none","dsr":"none","newline":"\\n","bin":"false","out":"char","addchar":"","responsetimeout":"10000"},{"id":"9c7379d4.e349b","type":"mqtt-broker","name":"","broker":"broker.hivemq.com","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"dc443c02.7786c","type":"ui_tab","name":"Fabrizio Project","icon":"dashboard","disabled":false,"hidden":false},{"id":"85190e56.ffb55","type":"ui_group","name":"Room 2","tab":"dc443c02.7786c","order":2,"disp":true,"width":24,"collapse":false},{"id":"54c7ec01.1d1e74","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3","token":""},{"id":"63b5dcf7.63216c","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3","token":""},{"id":"f3cd2a9e.2c85e","type":"influxdb","hostname":"127.0.0.1","port":"8086","protocol":"http","database":"BrewIoT","name":"BrewIoT","usetls":false,"tls":"","influxdbVersion":"1.x","url":"http://localhost:8086","rejectUnauthorized":true},{"id":"bbc00b36.5dcb3","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3","token":""},{"id":"f468cf7.e8c3b3","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3","token":""},{"id":"c65975e3.dd7a5","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3","token":""},{"id":"c60e9113.2de5e","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3","token":""},{"id":"c656faed.f9e1","type":"tls-config","name":"","cert":"","key":"","ca":"/etc/mosquitto/ca_certificates/ca.crt","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"17152e84.ca1949","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3","token":""},{"id":"384a8f2.cd230f","type":"openhab2-controller2","name":"Openahab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3","token":""},{"id":"8dda9d82.4c2f08","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3","token":""},{"id":"30e45d17.1f780a","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3","token":""},{"id":"604e5b41.711244","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3","token":""},{"id":"bd8ec58b.323038","type":"openhab2-controller2","name":"openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3","token":""},{"id":"cf98f55b.1e9668","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3","token":""},{"id":"733e0cc1.39346c","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3","token":""},{"id":"95304c91.80ff28","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3","token":""},{"id":"4626691e.915a08","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3","token":""},{"id":"aed2604e.6e6ec","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3","token":""},{"id":"cb634289.bcb9a","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3","token":""},{"id":"b446d3ca.ff77c","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3","token":""},{"id":"fecef82c.f22498","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3","token":""},{"id":"c89b6e0c.c22ec","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3","token":""},{"id":"eeb221fb.ab27f","type":"influxdb","hostname":"127.0.0.1","port":"8086","protocol":"http","database":"test","name":"test","usetls":true,"tls":"d50d0c9f.31e858","influxdbVersion":"1.x","url":"http://localhost:8086","rejectUnauthorized":true},{"id":"d50d0c9f.31e858","type":"tls-config","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"94405174.05461","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3","token":""},{"id":"b397479b.b29288","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3","token":""},{"id":"a099a6cb.7b8b18","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3","token":""},{"id":"5946f3d2.fc4e2c","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3","token":""},{"id":"c4b81c7f.970d88","type":"mqtt-broker","name":"Locale","broker":"localhost","port":"8883","tls":"c656faed.f9e1","clientid":"10","usetls":true,"protocolVersion":"4","keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthRetain":"false","birthPayload":"","birthMsg":{},"closeTopic":"","closeQos":"0","closeRetain":"false","closePayload":"","closeMsg":{},"willTopic":"","willQos":"0","willRetain":"false","willPayload":"","willMsg":{},"sessionExpiry":""},{"id":"49288c41.ac3864","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"localhost","port":"8080","path":"","username":"","password":"","ohversion":"v2","token":""},{"id":"3d36de12.e94ef2","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3","token":""},{"id":"1c907abe.5cfa75","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3","token":""},{"id":"81b67dc0.bcbf7","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3","token":""},{"id":"140a3056.1a144","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3","token":""},{"id":"6945c15b.88e0a8","type":"serial-port","serialport":"/dev/ttyUSB0","serialbaud":"115200","databits":"8","parity":"none","stopbits":"1","waitfor":"","dtr":"none","rts":"none","cts":"none","dsr":"none","newline":"\\n","bin":"false","out":"char","addchar":"","responsetimeout":"10000"},{"id":"de808e71.8b2448","type":"mqtt-broker","name":"","broker":"broker.hivemq.com","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"5b052751.fddd78","type":"ui_tab","name":"Fabrizio Project","icon":"dashboard","disabled":false,"hidden":false},{"id":"ff7fb346.e3477","type":"ui_group","name":"Room 2","tab":"5b052751.fddd78","order":2,"disp":true,"width":24,"collapse":false},{"id":"b551bac4.7dbf98","type":"tls-config","name":"BrewIoT Configuration","cert":"","key":"","ca":"","certname":"brewmaster.crt","keyname":"brewmaster.key","caname":"ca.crt","servername":"","verifyservercert":false},{"id":"a033c53f.119878","type":"mqtt-broker","name":"Eclipse MQTT","broker":"mqtt.eclipseprojects.io","port":"8883","tls":"b551bac4.7dbf98","clientid":"","usetls":true,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"4764cd55.4b6bbc","type":"tls-config","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"ca.crt","servername":"manjarus","verifyservercert":true},{"id":"c7bcaf19.6fe7e8","type":"mqtt-broker","name":"Mosquitto local","broker":"192.168.2.18","port":"8883","tls":"4764cd55.4b6bbc","clientid":"node-red","usetls":true,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"9c5a9398.2f021","type":"openhab2-controller2","d":true,"name":"openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"54ab8b09.06bed4","type":"openhab2-controller2","d":true,"name":"openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"ec4d42b5.556788","type":"openhab2-controller2","d":true,"name":"openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"8dafb1a9.bac388","type":"openhab2-controller2","d":true,"name":"openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"2e8592de.18687e","type":"openhab2-controller2","d":true,"name":"openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"aeaaa31a.a0e7d","type":"openhab2-controller2","d":true,"name":"openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"6d563eae.c3e0c8","type":"serial-port","serialport":"/dev/ttyUSB0","serialbaud":"115200","databits":"8","parity":"none","stopbits":"1","waitfor":"","dtr":"none","rts":"none","cts":"none","dsr":"none","newline":"\\n","bin":"false","out":"char","addchar":"","responsetimeout":"10000"},{"id":"148b6df2.ac7462","type":"mqtt-broker","name":"","broker":"broker.hivemq.com","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"4e173576.7be66c","type":"ui_tab","name":"Fabrizio Project","icon":"dashboard","disabled":false,"hidden":false},{"id":"2e795522.ca7f7a","type":"ui_group","name":"Room 2","tab":"4e173576.7be66c","order":2,"disp":true,"width":24,"collapse":false},{"id":"1c75d0ce.1ce89f","type":"openhab2-controller2","name":"OpenHab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"433551ed.ce606","type":"serial-port","serialport":"/dev/ttyUSB0","serialbaud":"115200","databits":"8","parity":"none","stopbits":"1","waitfor":"","dtr":"none","rts":"none","cts":"none","dsr":"none","newline":"\\n","bin":"false","out":"char","addchar":"","responsetimeout":"10000"},{"id":"5812038d.44df74","type":"mqtt-broker","name":"","broker":"broker.hivemq.com","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"cd8cfa10.0785e8","type":"ui_tab","name":"Fabrizio Project","icon":"dashboard","disabled":false,"hidden":false},{"id":"2c374bd.f3b56b4","type":"ui_group","name":"Room 2","tab":"cd8cfa10.0785e8","order":2,"disp":true,"width":24,"collapse":false},{"id":"7ba953c.930dd2c","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"a23dad01.4b1598","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"fd452700.01a158","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"a56c10ae.a4111","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"27b83959.7e4a6e","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"5b004a04.46717c","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"cfc81c3a.4dca4","type":"tls-config","name":"","cert":"","key":"","ca":"/etc/mosquitto/ca_certificates/ca.crt","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"fc0774ce.44af8","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"48e357be.67a71","type":"openhab2-controller2","name":"Openahab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"e5b2540c.8da218","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"7c8a994f.001e4","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"9caf3348.a97c48","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"bc4514f1.447918","type":"openhab2-controller2","name":"openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"81c3fe48.001f58","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"511c0374.640d04","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"299fb74b.467c8","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"704230e.a76e75","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"4897ba12.d9bf9c","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"ccf3bd64.cb1d58","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"7c663599.7143b4","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"23b3aa1c.3dad96","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"4b2f0ee4.434d8","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"3b9820a5.028bd8","type":"tls-config","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"affb6bc2.40193","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"c3c251f1.7816a","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"a9aa7cb9.4370f","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"3c6112ae.ab84b6","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"f449a7a0.137538","type":"mqtt-broker","name":"Locale","broker":"localhost","port":"8883","tls":"cfc81c3a.4dca4","clientid":"10","usetls":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthRetain":"false","birthPayload":"","closeTopic":"","closeQos":"0","closeRetain":"false","closePayload":"","willTopic":"","willQos":"0","willRetain":"false","willPayload":""},{"id":"75be5519.cdd16c","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"localhost","port":"8080","path":"","username":"","password":"","ohversion":"v2"},{"id":"911960f9.ec98b8","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"2ec1b963.5cbe8e","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"234a1716.59023","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"854b7586.a42ea","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"6de191ee.624df","type":"influxdb","d":true,"hostname":"127.0.0.1","port":"8086","protocol":"http","database":"PROVA","name":"PROVA","usetls":false,"tls":"","influxdbVersion":"1.x","url":"http://localhost:8086","rejectUnauthorized":true},{"id":"dff1fadf.a3836","type":"influxdb","hostname":"127.0.0.1","port":"8086","protocol":"http","database":"PROVA","name":"","usetls":false,"tls":"","influxdbVersion":"1.x","url":"http://localhost:8086","rejectUnauthorized":true},{"id":"7a401dcf.476b1c","type":"influxdb","hostname":"127.0.0.1","port":"8086","protocol":"http","database":"test","name":"test","usetls":true,"tls":"d50d0c9f.31e858","influxdbVersion":"1.x","url":"http://localhost:8086","rejectUnauthorized":true},{"id":"b718509f.38c688","type":"influxdb","hostname":"127.0.0.1","port":"8086","protocol":"http","database":"database","name":"","usetls":false,"tls":"b551bac4.7dbf98","influxdbVersion":"1.x","url":"http://localhost:8086","rejectUnauthorized":true},{"id":"49f647a9.9d2c28","type":"serial-port","serialport":"/dev/ttyUSB0","serialbaud":"115200","databits":"8","parity":"none","stopbits":"1","waitfor":"","dtr":"none","rts":"none","cts":"none","dsr":"none","newline":"\\n","bin":"false","out":"char","addchar":"","responsetimeout":"10000"},{"id":"91c17e4d.b56f18","type":"mqtt-broker","name":"","broker":"broker.hivemq.com","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"6f5b2629.63b5a","type":"ui_tab","name":"Fabrizio Project","icon":"dashboard","disabled":false,"hidden":false},{"id":"17ff5f8a.36f2e","type":"ui_group","name":"Room 2","tab":"6f5b2629.63b5a","order":2,"disp":true,"width":24,"collapse":false},{"id":"9e1e591c.456a78","type":"tls-config","name":"BrewIoT Configuration","cert":"","key":"","ca":"","certname":"brewmaster.crt","keyname":"brewmaster.key","caname":"ca.crt","servername":"","verifyservercert":false},{"id":"9d938d51.9b7938","type":"mqtt-broker","name":"Eclipse MQTT","broker":"mqtt.eclipseprojects.io","port":"8883","tls":"9e1e591c.456a78","clientid":"","usetls":true,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"cf56fc5e.5e8598","type":"tls-config","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"ca.crt","servername":"manjarus","verifyservercert":true},{"id":"a874de59.5c7f6","type":"mqtt-broker","name":"Mosquitto local","broker":"192.168.2.18","port":"8883","tls":"cf56fc5e.5e8598","clientid":"node-red","usetls":true,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"8cbe87b.41fc3f8","type":"openhab2-controller2","d":true,"name":"openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"8270058d.dcf568","type":"openhab2-controller2","d":true,"name":"openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"b7672ac3.22f508","type":"openhab2-controller2","d":true,"name":"openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"7e12f834.3e1958","type":"openhab2-controller2","d":true,"name":"openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"25da5e5e.4cc9f2","type":"openhab2-controller2","d":true,"name":"openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"2f3660fc.b97ac8","type":"openhab2-controller2","d":true,"name":"openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"3969f522.60990a","type":"serial-port","serialport":"/dev/ttyUSB0","serialbaud":"115200","databits":"8","parity":"none","stopbits":"1","waitfor":"","dtr":"none","rts":"none","cts":"none","dsr":"none","newline":"\\n","bin":"false","out":"char","addchar":"","responsetimeout":"10000"},{"id":"9876aaac.ca0da8","type":"mqtt-broker","name":"","broker":"broker.hivemq.com","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"700833ed.0be59c","type":"ui_tab","name":"Fabrizio Project","icon":"dashboard","disabled":false,"hidden":false},{"id":"ce4baa8.d6a12d8","type":"ui_group","name":"Room 2","tab":"700833ed.0be59c","order":2,"disp":true,"width":24,"collapse":false},{"id":"b72ca9ca.c62898","type":"openhab2-controller2","name":"OpenHab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"4e4d0e66.c1aca8","type":"serial-port","serialport":"/dev/ttyUSB0","serialbaud":"115200","databits":"8","parity":"none","stopbits":"1","waitfor":"","dtr":"none","rts":"none","cts":"none","dsr":"none","newline":"\\n","bin":"false","out":"char","addchar":"","responsetimeout":"10000"},{"id":"6c6cfc4.a996784","type":"mqtt-broker","name":"","broker":"broker.hivemq.com","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"d9c25b63.0c58a","type":"ui_tab","name":"Fabrizio Project","icon":"dashboard","disabled":false,"hidden":false},{"id":"e97991ff.fed4f","type":"ui_group","name":"Room 2","tab":"d9c25b63.0c58a","order":2,"disp":true,"width":24,"collapse":false},{"id":"58ea0e5.8c31a7","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"1c8c1ce4.2d849b","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"f7ed75b0.74bc1","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"ef0b5517.b8d2","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"61031b65.700394","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"e4fd35f5.11","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"76fe7b92.1b0ac4","type":"tls-config","name":"","cert":"","key":"","ca":"/etc/mosquitto/ca_certificates/ca.crt","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"dc793536.9dea","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"e6c1ccf1.dc3cd","type":"openhab2-controller2","name":"Openahab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"9ee585db.d9f95","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"864a052d.83c75","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"f9838086.19ccd8","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"b169612f.225518","type":"openhab2-controller2","name":"openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"f48b8b94.0d3eb8","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"5bed7d5a.8db8d4","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"56728f02.c61268","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"e02328da.b24cd","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"984790b.37e087","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"7e8f1f41.c6b4a8","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"f9c93eee.8a1f3","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"54286e3d.b48108","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"c27778d7.159ed","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"cf0e3aa9.5fbff","type":"tls-config","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"8040b8c0.deefd8","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"51790ca0.a3def4","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"42d6c5a3.b96474","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"2185a8d9.f6bbf","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"cf002067.075f68","type":"mqtt-broker","name":"Locale","broker":"localhost","port":"8883","tls":"76fe7b92.1b0ac4","clientid":"10","usetls":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthRetain":"false","birthPayload":"","closeTopic":"","closeQos":"0","closeRetain":"false","closePayload":"","willTopic":"","willQos":"0","willRetain":"false","willPayload":""},{"id":"1fb26739.e2e961","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"localhost","port":"8080","path":"","username":"","password":"","ohversion":"v2"},{"id":"36547ee5.29902a","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"58a7d8b3.2c08b","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"90af01b4.7cce6","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"9dc39929.15c4a8","type":"openhab2-controller2","name":"Openhab","protocol":"http","host":"192.168.1.165","port":"8080","path":"","username":"","password":"","ohversion":"v3"},{"id":"f85a883a.9c542","type":"influxdb","d":true,"hostname":"127.0.0.1","port":"8086","protocol":"http","database":"PROVA","name":"PROVA","usetls":false,"tls":"","influxdbVersion":"1.x","url":"http://localhost:8086","rejectUnauthorized":true},{"id":"c86b03cb.9ed8c","type":"influxdb","hostname":"127.0.0.1","port":"8086","protocol":"http","database":"PROVA","name":"","usetls":false,"tls":"","influxdbVersion":"1.x","url":"http://localhost:8086","rejectUnauthorized":true},{"id":"6dca15bc.bbf88c","type":"influxdb","hostname":"127.0.0.1","port":"8086","protocol":"http","database":"test","name":"test","usetls":true,"tls":"d50d0c9f.31e858","influxdbVersion":"1.x","url":"http://localhost:8086","rejectUnauthorized":true},{"id":"885cf68f.8ec58","type":"mqtt out","z":"2775c3f5.a41fec","name":"Temp Observe","topic":"cmd/br/0/3303/0/5700/observe","qos":"1","retain":"false","broker":"5812038d.44df74","x":400,"y":1020,"wires":[]},{"id":"d5d2b258.9b6be","type":"inject","z":"2775c3f5.a41fec","name":"On","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"v\":\"ON\"}","payloadType":"json","x":170,"y":1000,"wires":[["885cf68f.8ec58"]]},{"id":"b067073b.e23af8","type":"inject","z":"2775c3f5.a41fec","name":"Off","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"v\":\"OFF\"}","payloadType":"json","x":170,"y":1040,"wires":[["885cf68f.8ec58"]]},{"id":"14d2e7e2.c9fc3","type":"mqtt in","z":"2775c3f5.a41fec","name":"Read responses","topic":"resp/brewIoT/br/0/#","qos":"0","datatype":"json","broker":"5812038d.44df74","x":1020,"y":920,"wires":[["a85e16d7.fc8c4"]]},{"id":"a85e16d7.fc8c4","type":"debug","z":"2775c3f5.a41fec","d":true,"name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":1210,"y":920,"wires":[]},{"id":"3b9a8424.f4689c","type":"mqtt out","z":"2775c3f5.a41fec","name":"Hum Observe","topic":"cmd/st/0/3304/0/5700/observe","qos":"1","retain":"false","broker":"5812038d.44df74","x":400,"y":1120,"wires":[]},{"id":"66320de8.ca8a94","type":"inject","z":"2775c3f5.a41fec","name":"On","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"v\":\"ON\"}","payloadType":"json","x":170,"y":1100,"wires":[["3b9a8424.f4689c"]]},{"id":"fe710b67.75129","type":"inject","z":"2775c3f5.a41fec","name":"Off","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"v\":\"OFF\"}","payloadType":"json","x":170,"y":1140,"wires":[["3b9a8424.f4689c"]]},{"id":"9b6d2f04.fde4c","type":"mqtt out","z":"2775c3f5.a41fec","name":"Fire Observe","topic":"cmd/brewIoT/st/0/503/0/5700/observe","qos":"1","retain":"false","broker":"5812038d.44df74","x":390,"y":1220,"wires":[]},{"id":"8eb094ec.b5dd3","type":"inject","z":"2775c3f5.a41fec","name":"On","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"v\":\"ON\"}","payloadType":"json","x":170,"y":1200,"wires":[["9b6d2f04.fde4c"]]},{"id":"5715d48f.9ff324","type":"inject","z":"2775c3f5.a41fec","name":"Off","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"v\":\"OFF\"}","payloadType":"json","x":170,"y":1240,"wires":[["9b6d2f04.fde4c"]]},{"id":"b11b4e4a.68d0d","type":"mqtt out","z":"2775c3f5.a41fec","name":"Light Observe","topic":"cmd/st/0/3301/0/5700/observe","qos":"1","retain":"false","broker":"5812038d.44df74","x":400,"y":920,"wires":[]},{"id":"80b2e990.8f1b88","type":"inject","z":"2775c3f5.a41fec","name":"On","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"v\":\"ON\"}","payloadType":"json","x":170,"y":900,"wires":[["b11b4e4a.68d0d"]]},{"id":"2c7eb463.b063c4","type":"inject","z":"2775c3f5.a41fec","name":"Off","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"v\":\"OFF\"}","payloadType":"json","x":170,"y":940,"wires":[["b11b4e4a.68d0d"]]},{"id":"d29207e1.19a3e","type":"inject","z":"2775c3f5.a41fec","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":615,"y":920,"wires":[["4f63705a.4f3f3"]],"l":false},{"id":"7dcf2d3b.a14edc","type":"inject","z":"2775c3f5.a41fec","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":615,"y":1020,"wires":[["c5605b96.f9ba78"]],"l":false},{"id":"53b84a7b.0956bc","type":"inject","z":"2775c3f5.a41fec","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":615,"y":1120,"wires":[["49a23c7b.4ab8dc"]],"l":false},{"id":"dd2eeb16.f17738","type":"inject","z":"2775c3f5.a41fec","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":615,"y":1220,"wires":[["c61d8f26.dca708"]],"l":false},{"id":"4f63705a.4f3f3","type":"mqtt out","z":"2775c3f5.a41fec","name":"Request Light","topic":"cmd/st/0/3301/0/5700","qos":"0","retain":"false","broker":"5812038d.44df74","x":740,"y":920,"wires":[]},{"id":"c5605b96.f9ba78","type":"mqtt out","z":"2775c3f5.a41fec","name":"Request Temp","topic":"cmd/br/0/3303/0/5700","qos":"0","retain":"false","broker":"5812038d.44df74","x":740,"y":1020,"wires":[]},{"id":"49a23c7b.4ab8dc","type":"mqtt out","z":"2775c3f5.a41fec","name":"Request Hum","topic":"cmd/st/0/3304/0/5700","qos":"0","retain":"false","broker":"5812038d.44df74","x":740,"y":1120,"wires":[]},{"id":"c61d8f26.dca708","type":"mqtt out","z":"2775c3f5.a41fec","name":"Request Fire","topic":"cmd/st/0/503/0/5700","qos":"0","retain":"false","broker":"5812038d.44df74","x":730,"y":1220,"wires":[]},{"id":"cc3836fe.795fd8","type":"mqtt in","z":"1963aa58.852a6e","name":"Data from Brewer","topic":"data/br/+/+/+/5700","qos":"0","datatype":"json","broker":"b750acbb.e73dc8","nl":false,"rap":false,"rh":"0","x":120,"y":360,"wires":[["7249a26a.9f0b64"]]},{"id":"7249a26a.9f0b64","type":"function","z":"1963aa58.852a6e","name":"","func":"const topic = msg.topic;\nlet array = topic.split('/');\n\nlet device = array[2];\nlet sensor = array[3];\nlet object = array[4];\n\nif(msg.payload.v == -127 ) return;\n\nlet formattedValue = Math.round(msg.payload.v*100)/100;\n/* Valutare se togliere il sensorType dall'insieme di\n * valori che vengono inoltrati nei nodi successivi\n */\nlet value1 = {\n            payload: {\n                value: formattedValue,\n                devInstance : device,\n                sensorType  : sensor\n            }\n}\nlet value2 = {\n            payload: {\n                time: msg.payload.tstamp,\n                value: formattedValue,\n                devInstance: device,\n                sensorType:  sensor,\n                objInstance: object\n            }\n};\n\nreturn [value1, value2];\n","outputs":2,"noerr":0,"initialize":"","finalize":"","libs":[],"x":255,"y":360,"wires":[["9c05eca6.48661","fd7af7d7.fb55"],["6863f0c2.a0cdf8"]],"outputLabels":["temperature","payload"],"icon":"node-red/switch.svg","l":false},{"id":"26b6b482.d5d554","type":"comment","z":"1963aa58.852a6e","name":"DownFlow","info":"Il flow sottostante serve a caricare i file dentro il DB InfluxDB","x":240,"y":400,"wires":[]},{"id":"537c787.f0a8e08","type":"comment","z":"1963aa58.852a6e","name":"UpFlow","info":"Il flow in alto serve a gestire le soglie della sensore e, inoltre, ad inviare il valore su OpenHab","x":250,"y":320,"wires":[]},{"id":"9c05eca6.48661","type":"function","z":"1963aa58.852a6e","name":"Temperature Thresholds check","func":"// Qui riprendiamo i valori dal nodo precedente.\nlet device = msg.payload.devInstance;\nlet sensor = msg.payload.sensorType;\nlet value = msg.payload.value;\n\n\n/* Qui andiamo a recuperare le soglie stabilite per il\n * nostro sensore\n */\nlet minValue = global.get(\"brewer_\"+device+\"_minTemp\");\nlet maxValue = global.get(\"brewer_\"+device+\"_maxTemp\");\n\nif(minValue === undefined){\n    minValue = 16;\n}\nif(maxValue === undefined){\n    maxValue = 26;\n}\nlet avg = (minValue + maxValue)/2;\n\n\n/* Recuperiamo i valori della cintura riscaldante e creiamo\n * il msg per il controllo della stessa. L'ID del WiFi relay\n * correlato alla scheda ESP è uguale all'ID della scheda \n * ESP + 1.\n */\nlet beltDevice = parseInt(device)+1;\nlet beltVariable = \"brewer_\"+beltDevice+\"_belt\";\nlet beltStatus = flow.get(beltVariable);\nif(beltStatus === undefined){\n    beltStatus = false;\n    flow.set(beltVariable, beltStatus);\n}\nlet beltControl={\n    topic: \"br/\"+beltDevice+\"/3306/0/5850/cmnd/POWER\",\n    payload: \"\"\n};\n\n\n/* Qui invece gestiamo i valori del led d'allarme */\nlet ledVariable = \"brewer_\"+device+\"_tempAlarm\";\nlet ledStatus = flow.get(ledVariable);\nif(ledStatus === undefined){\n    ledStatus = false;\n    flow.set(ledVariable, ledStatus);\n}\nlet ledControl={\n    topic: \"cmd/br/\"+device+\"/3311/0/5850\",\n    payload: \"\"\n};\n\nif(value<minValue){\n    /* Abbiamo rilevato una temperatura che è minore di\n     * quella minima accettabile, quindi dobbiamo far partire\n     * la cintura riscaldante (a meno che non sia già partita)\n     */\n    if(!beltStatus){\n        beltControl.payload = \"ON\";\n    }\n    else{\n        // La cintura è già attiva.\n        beltControl = null;\n    }\n    if(!ledStatus){\n        ledControl.payload = {\n            v: \"ON\"\n        };\n        flow.set(ledVariable,true);\n    }\n    else ledControl = null;\n    \n}\nelse if(value>maxValue){\n    /* La cisterna è troppo calda. Dobbiamo far \n     * partire l'allarme\n     */\n    beltControl = null;\n    if(!ledStatus){\n        // L'allarme non è attivo\n        ledControl.payload = {\n            v: \"ON\"\n        };\n        flow.set(ledVariable,true);\n    }\n    else ledControl = null;\n}\nelse if(value>=minValue && value < maxValue){\n    /* Se siamo qui, la temperatura é a posto. */\n    if(value>=avg){\n        /* La temperatura ha superato la media di valori \n         * ammessi. Se c'era una cintura accesa in precedenza\n         * ora è il momento di spegnerla\n         */\n        if(beltStatus){\n            beltControl.payload = \"OFF\";\n        }\n        else beltControl = null;\n    }\n    else beltControl=null;\n    if(ledStatus){\n        /* Se c'era un allarme attivo, ora è il momento di\n           spegnerlo */\n        ledControl.payload = {\n            v: \"OFF\",\n        };\n        flow.set(ledVariable,false)\n    }\n    else ledControl = null;\n}\n\nreturn [beltControl,ledControl];","outputs":2,"noerr":0,"initialize":"","finalize":"","libs":[],"x":530,"y":180,"wires":[["768c888a.0f0a6"],["81abdccc.ec9048"]],"outputLabels":["BELT_CONTROL","LED_CONTROL"]},{"id":"5b272d4b.2c785c","type":"function","z":"d9ce3705.0896e8","name":"Recipy Configuration","func":"// Qui dentro scriveremo i vari dati delle ricette.\n\nglobal.set(\"\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"// Il codice qui dentro viene fatto partire automaticamente,\n// ogni volta che ","finalize":"","x":460,"y":200,"wires":[[]]},{"id":"768c888a.0f0a6","type":"mqtt out","z":"1963aa58.852a6e","name":"Send to belt","topic":"","qos":"1","retain":"false","respTopic":"","contentType":"","userProps":"","correl":"","expiry":"","broker":"b750acbb.e73dc8","x":850,"y":160,"wires":[]},{"id":"7df6d183.a15e3","type":"mqtt in","z":"1963aa58.852a6e","name":"Response from Sonoff","topic":"br/+/3306/+/5850/RESULT","qos":"1","datatype":"json","broker":"b750acbb.e73dc8","nl":false,"rap":false,"rh":"0","x":140,"y":580,"wires":[["d060c561.9d294","d6f7d227.ff3d5"]]},{"id":"d060c561.9d294","type":"function","z":"1963aa58.852a6e","name":"Update belt status","func":"const topic = msg.topic;\nlet array = topic.split('/');\n\nlet device = array[1];\n\nlet beltVariable = \"brewer_\"+device+\"_belt\";\nlet result = false;\nif(msg.payload.POWER == \"ON\")\n    result = true;\n/*\n * Salviamo lo stato della cintura riscaldante in una\n * variabile con visibilità \"flow\", in modo da essere poi\n * leggibile da altri nodi nello stesso flow.\n */\nflow.set(beltVariable, result);","outputs":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":370,"y":580,"wires":[]},{"id":"1940a1e5.917e9e","type":"mqtt in","z":"1775ac36.40b604","name":"Data from Stocker","topic":"data/st/+/+/+/5700","qos":"0","datatype":"json","broker":"b750acbb.e73dc8","nl":false,"rap":false,"rh":"2","x":130,"y":360,"wires":[["afd20d09.d4a568"]]},{"id":"afd20d09.d4a568","type":"function","z":"1775ac36.40b604","name":"MUX","func":"const topic = msg.topic;\nlet array = topic.split('/');\n\nlet device = array[2];\nlet sensor = array[3];\nlet object = array[4];\n\nlet formattedValue = Math.round(msg.payload.v*100)/100;\nlet tempVal=null, humVal=null, lightVal=null, fireVal= null;\n\nswitch(sensor){\n    case \"503\": \n        fireVal = {\n            payload: {\n                time: msg.payload.tstamp,\n                value: formattedValue,\n                dev: device,\n                objInstance: object\n            }\n        }; break;\n    case \"3301\": \n        lightVal = {\n            payload: {\n                time: msg.payload.tstamp,\n                value: formattedValue,\n                dev: device,\n                objInstance: object\n            }\n        };break;\n    case \"3303\":\n        tempVal = {\n            payload: {\n                time: msg.payload.tstamp,\n                value: formattedValue,\n                dev: device,\n                objInstance: object\n            }\n        };break;\n    case \"3304\": \n        humVal = {\n            payload: {\n                time: msg.payload.tstamp,\n                value: formattedValue,\n                dev: device,\n                objInstance: object\n            }\n        };break;\n    default: break;\n}\n\nreturn [tempVal, humVal, lightVal, fireVal];\n","outputs":4,"noerr":0,"initialize":"","finalize":"","libs":[],"x":330,"y":360,"wires":[["a79e6d5f.27e0f8"],["37e6d11.9ddf62e"],["bb2e63fd.8fc1a8"],["713ba244.fec6f4"]],"outputLabels":["Temperature","Humidity","Light","Fire"],"icon":"node-red/switch.svg"},{"id":"b010fa52.9648a8","type":"comment","z":"2775c3f5.a41fec","name":"STOCKER","info":"","x":620,"y":40,"wires":[]},{"id":"a79e6d5f.27e0f8","type":"function","z":"1775ac36.40b604","name":"Handle Temperature","func":"let value=msg.payload.value;\nlet dev = msg.payload.dev;\nlet obj = msg.payload.objInstance;\nlet timestamp = msg.payload.timestamp;\n\nif(value==-127) return;\n\n\n//Qui recuperiamo il precedente valore d'allarme\nconst tempAlarm=\"stocker_\"+dev+\"_temp_\"+obj;\nlet alarm = flow.get(tempAlarm);\n\n//Questa è la soglia definita nel Recipy MGMT\nlet maxTemp=global.get(\"stocker_max_temp\");\nlet minTemp=global.get(\"stocker_min_temp\");\n/* se non c'è alcuna customizzazione sulla soglia di\n     * umidità, allora impostiamo il valore di default.\n     */\nif(maxTemp === undefined){\n    maxTemp = 26;\n}\nif(minTemp === undefined){\n    minTemp = 4;\n}\n/* Questo if viene eseguito solo la prima volta, per\n * inizializzare la variable */\nif(alarm === undefined){\n    alarm = false;\n    flow.set(tempAlarm, false);\n}\n\nlet mqttMessage = {\n    topic: \"cmd/st/\"+dev+\"/3311/0/5850\",\n    payload: \"\"\n};\n\nif(((value < maxTemp) && (value > minTemp)) && alarm){\n    // temperatura a posto, ma c'è un allarme attivo\n    mqttMessage.payload = {\"v\":\"OFF\"};\n    flow.set(tempAlarm, false);\n}\nelse if((value >= maxTemp) && !alarm){\n    // alta temperatura rilevata, ma nessun allarme attivo\n    mqttMessage.payload = {\"v\":\"ON\"};\n    flow.set(tempAlarm, true);\n}\nelse if((value <= minTemp) && !alarm){\n    // bassa temperatura rilevata, ma nessun allarme attivo\n    mqttMessage.payload = {\"v\":\"ON\"};\n    flow.set(tempAlarm, true);\n}\nelse{\n    // In questo caso non dobbiamo fare nula\n    mqttMessage = null;\n}\n\nreturn [msg, mqttMessage];","outputs":2,"noerr":0,"initialize":"","finalize":"","libs":[],"x":580,"y":100,"wires":[["f725e6b1.5f9c38"],["e802b4e6.19bc08"]]},{"id":"37e6d11.9ddf62e","type":"function","z":"1775ac36.40b604","name":"Handle Humidity","func":"let value=msg.payload.value;\nlet dev = msg.payload.dev;\nlet obj = msg.payload.objInstance;\nlet timestamp = new Date().getTime();\n\nif(value==-127) return;\n\n//Qui recuperiamo il precedente valore d'allarme\nconst humidityAlarm=\"stocker_\"+dev+\"_humidity_\"+obj;\nlet alarm = flow.get(humidityAlarm);\n\n//Questa è la soglia definita nel Recipy MGMT\nlet maxHumidity=global.get(\"stocker_max_humidity\");\nif(maxHumidity === undefined){\n    /* se non c'è alcuna customizzazione sulla soglia di\n     * umidità, allora impostiamo il valore di default.\n     */\n    maxHumidity = 50;\n}\n/* Questo if viene eseguito solo la prima volta, per\n * inizializzare la variable */\nif(alarm === undefined){\n    alarm = false;\n    flow.set(humidityAlarm, false);\n}\nlet mqttMessage = {\n    topic: \"cmd/st/\"+dev+\"/3311/1/5850\",\n    payload: \"\"\n};\n\nif((value < maxHumidity) && alarm){\n    // umidità posto, ma c'è un allarme attivo\n    mqttMessage.payload = {\"v\":\"OFF\"};\n    flow.set(humidityAlarm, false);\n}\nelse if((value >= maxHumidity) && !alarm){\n    // alta umidità rilevata, ma nessun allarme attivo\n    mqttMessage.payload = {\"v\":\"ON\"};\n    flow.set(humidityAlarm, true);\n}\nelse{\n    // In questo caso non dobbiamo fare nula\n    mqttMessage = null;\n}\n\nreturn [msg, mqttMessage];","outputs":2,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":260,"wires":[["8d54f65.757e108"],["504f31ba.02cf78"]]},{"id":"bb2e63fd.8fc1a8","type":"function","z":"1775ac36.40b604","name":"Handle Light","func":"let value=msg.payload.value;\nlet dev = msg.payload.dev;\nlet obj = msg.payload.objInstance;\nlet timestamp = msg.payload.timestamp;\n\nif(value==100) return;\n\n//Qui recuperiamo il precedente valore d'allarme\nconst lightAlarm=\"stocker_\"+dev+\"_light_\"+obj;\nlet alarm = flow.get(lightAlarm);\n\n//Questa è la soglia definita nel Recipy MGMT\nlet maxLight=global.get(\"stocker_max_light\");\nif(maxLight === undefined){\n    /* se non c'è alcuna customizzazione sulla soglia di luce\n     * allora impostiamo il valore di default.\n     */\n    maxLight = 50;\n}\n/* Questo if viene eseguito solo la prima volta, per\n * inizializzare la variable */\nif(alarm === undefined){\n    alarm = false;\n    flow.set(lightAlarm, false);\n}\nlet mqttMessage = {\n    topic: \"cmd/st/\"+dev+\"/3311/2/5850\",\n    payload: \"\"\n};\n\nif((value < maxLight) && alarm){\n    // la luce è a posto, ma c'è un allarme attivo\n    mqttMessage.payload = {\"v\":\"OFF\"};\n    flow.set(lightAlarm, false);\n}\nelse if((value >= maxLight)&& !alarm){\n    // luce intensa rilevata, ma nessun allarme attivo\n    mqttMessage.payload = {\"v\":\"ON\"};\n    flow.set(lightAlarm, true);\n}\nelse{\n    // In questo caso non dobbiamo fare nula\n    mqttMessage = null;\n}\n\nreturn [msg, mqttMessage];","outputs":2,"noerr":0,"initialize":"","finalize":"","libs":[],"x":650,"y":460,"wires":[["4d0a3fa6.f21b4"],["b46d8d59.e73e9"]]},{"id":"713ba244.fec6f4","type":"function","z":"1775ac36.40b604","name":"Handle Fire","func":"let result=true;\nlet dev = msg.payload.dev;\nlet obj = msg.payload.objInstance;\nlet fireAlarm=\"stocker_\"+dev+\"_fire_\"+obj;\nlet alarm = flow.get(fireAlarm);\n\n\n/* Questo if viene eseguito solo la prima volta, per\n * inizializzare la variable */\nif(alarm === undefined){\n    alarm = false;\n    flow.set(fireAlarm, false);\n}\n\nif(msg.payload.value == 1){\n    // non è stata rilevata alcuna fiamma.\n    result= false;\n    //flow.set(fireVariable, false);\n}\n\nmsg.payload = {\n    result: result,\n    dev: dev,\n    obj: obj,\n    timestamp : msg.payload.timestamp\n};\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":550,"y":640,"wires":[["9dc94bd3.e6346","72731a5a.fef81c"]]},{"id":"9dc94bd3.e6346","type":"function","z":"1775ac36.40b604","name":"Fire Alarm Control","func":"let dev=msg.payload.dev;\nlet obj=msg.payload.obj;\n\nconst fireVariable= \"stocker_\"+dev+\"_fire_\"+obj;\nlet alarm = flow.get(fireVariable);\n\n// Qui creiamo il topic\nmsg.topic=\"cmd/st/\"+dev+\"/3311/3/5850\";\n\n\n/* Ora andiamo a verificare se l'allarme va acceso o spento,\n * in base al risultato del sensore e alla variable flow salvata\n * in precedenza. Se entrambi i valori sono negativi, allora l'\n * allarme è spento e rimane spento, quindi non facciamo nulla.\n * Se entrambi i valori sono positivi, allora l'allarme è attivo\n * e rimane attivo, quindi non facciamo nulla. Se i due valori\n * sono contrastanti, allora l'allarme va acceso oppure spento\n */\nlet result=msg.payload.result;\n\nif(result && !alarm){\n    // Fuoco rilevato, ma allarme spento\n    flow.set(fireVariable, true);\n    msg.payload={\"v\":\"ON\"};\n}\nelse if(!result && alarm){\n    // Fuoco non rilevato, ma allarme attivo\n    flow.set(fireVariable, false);\n    msg.payload={\"v\":\"OFF\"};\n}\nelse{\n    //Altrimenti non mandiamo nulla.\n    msg = null;\n}\n\n\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":810,"y":660,"wires":[["1988b2a8.be70ad"]]},{"id":"1988b2a8.be70ad","type":"mqtt out","z":"1775ac36.40b604","name":"Send Fire Alarm","topic":"","qos":"1","retain":"true","respTopic":"","contentType":"","userProps":"","correl":"","expiry":"","broker":"b750acbb.e73dc8","x":1020,"y":680,"wires":[]},{"id":"72731a5a.fef81c","type":"change","z":"1775ac36.40b604","name":"OpenHab format","rules":[{"t":"change","p":"payload.result","pt":"msg","from":"true","fromt":"bool","to":"true","tot":"str"},{"t":"change","p":"payload.result","pt":"msg","from":"false","fromt":"bool","to":"false","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":620,"wires":[["59cf2e2a.19d5d"]]},{"id":"b46d8d59.e73e9","type":"mqtt out","z":"1775ac36.40b604","name":"Send Light Alarm","topic":"","qos":"1","retain":"true","respTopic":"","contentType":"","userProps":"","correl":"","expiry":"","broker":"b750acbb.e73dc8","x":950,"y":500,"wires":[]},{"id":"504f31ba.02cf78","type":"mqtt out","z":"1775ac36.40b604","name":"Send Humidity Alarm","topic":"","qos":"1","retain":"true","respTopic":"","contentType":"","userProps":"","correl":"","expiry":"","broker":"b750acbb.e73dc8","x":940,"y":320,"wires":[]},{"id":"e802b4e6.19bc08","type":"mqtt out","z":"1775ac36.40b604","name":"Send Temperature Alarm","topic":"","qos":"1","retain":"true","respTopic":"","contentType":"","userProps":"","correl":"","expiry":"","broker":"b750acbb.e73dc8","x":1010,"y":140,"wires":[]},{"id":"81abdccc.ec9048","type":"mqtt out","z":"1963aa58.852a6e","name":"Send to led","topic":"","qos":"1","retain":"true","respTopic":"","contentType":"","userProps":"","correl":"","expiry":"","broker":"b750acbb.e73dc8","x":850,"y":220,"wires":[]},{"id":"fd7af7d7.fb55","type":"switch","z":"1963aa58.852a6e","name":"Switch Brewer","property":"payload.devInstance","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"eq","v":"10","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":480,"y":320,"wires":[["d44074b4.983c7"],["ea686a64.1963c8"]]},{"id":"219e031a.1ca1a4","type":"openhab2-out2","z":"1963aa58.852a6e","name":"Temperature Brewer 2","controller":"a23dad01.4b1598","itemname":"temperatureBewer1","topic":"ItemCommand","payload":"","onlywhenchanged":false,"x":780,"y":360,"wires":[]},{"id":"f725e6b1.5f9c38","type":"change","z":"1775ac36.40b604","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.value","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":835,"y":80,"wires":[["926d4e80.1a4cf8"]],"l":false},{"id":"59cf2e2a.19d5d","type":"change","z":"1775ac36.40b604","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.result","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":875,"y":620,"wires":[["2e1f763a.a56d0a"]],"l":false},{"id":"8d54f65.757e108","type":"change","z":"1775ac36.40b604","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.value","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":815,"y":260,"wires":[["19ce6b00.1cdc8d"]],"l":false},{"id":"4d0a3fa6.f21b4","type":"change","z":"1775ac36.40b604","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.value","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":795,"y":440,"wires":[["c7d4ce19.c74dc8"]],"l":false},{"id":"926d4e80.1a4cf8","type":"openhab2-out2","z":"1775ac36.40b604","name":"Temperature Stocker","controller":"48e357be.67a71","itemname":"temperaturestocker","topic":"ItemCommand","payload":"","onlywhenchanged":false,"x":1000,"y":80,"wires":[]},{"id":"19ce6b00.1cdc8d","type":"openhab2-out2","z":"1775ac36.40b604","name":"Humidity Stocker","controller":"e5b2540c.8da218","itemname":"humidityStocker","topic":"","payload":"","onlywhenchanged":false,"x":950,"y":260,"wires":[]},{"id":"c7d4ce19.c74dc8","type":"openhab2-out2","z":"1775ac36.40b604","name":"Light Stocker","controller":"7c8a994f.001e4","itemname":"lightSensor","topic":"","payload":"","onlywhenchanged":false,"x":940,"y":440,"wires":[]},{"id":"2e1f763a.a56d0a","type":"openhab2-out2","z":"1775ac36.40b604","name":"Fire Alarm Stocker","controller":"9caf3348.a97c48","itemname":"fireSensor","topic":"ItemCommand","payload":"","onlywhenchanged":false,"x":1030,"y":620,"wires":[]},{"id":"2fbc039.399647c","type":"mqtt out","z":"2775c3f5.a41fec","name":"Request Light","topic":"cmd/st/0/3301/0/5700","qos":"0","retain":"false","respTopic":"","contentType":"","userProps":"","correl":"","expiry":"","broker":"5812038d.44df74","x":1040,"y":240,"wires":[]},{"id":"994253da.f6dfa8","type":"mqtt out","z":"2775c3f5.a41fec","name":"Request Temp","topic":"cmd/st/0/3303/0/5700","qos":"0","retain":"false","respTopic":"","contentType":"","userProps":"","correl":"","expiry":"","broker":"5812038d.44df74","x":1040,"y":120,"wires":[]},{"id":"d8eeb1e5.f367d","type":"mqtt out","z":"2775c3f5.a41fec","name":"Request Hum","topic":"cmd/st/0/3304/0/5700","qos":"0","retain":"false","respTopic":"","contentType":"","userProps":"","correl":"","expiry":"","broker":"5812038d.44df74","x":1040,"y":180,"wires":[]},{"id":"dbe2ba87.f6528","type":"mqtt out","z":"2775c3f5.a41fec","name":"Request Fire","topic":"cmd/st/0/503/0/5700","qos":"0","retain":"false","respTopic":"","contentType":"","userProps":"","correl":"","expiry":"","broker":"5812038d.44df74","x":1030,"y":300,"wires":[]},{"id":"fc72d616.4c4cf8","type":"openhab2-in2","z":"2775c3f5.a41fec","name":"Light Update Stocker","controller":"511c0374.640d04","itemname":"LightUpdateStocker","topic":"","initialstate":false,"whenupdated":false,"whencommand":true,"whenchanged":false,"changedfrom":"","changedto":"","x":760,"y":240,"wires":[["2fbc039.399647c"]]},{"id":"6a18b3fe.c15e9c","type":"openhab2-in2","z":"2775c3f5.a41fec","name":"Temperature Update Stocker","controller":"299fb74b.467c8","itemname":"TemperatureUpdateStocker","topic":"","initialstate":false,"whenupdated":false,"whencommand":true,"whenchanged":false,"changedfrom":"","changedto":"","x":780,"y":120,"wires":[["994253da.f6dfa8"]]},{"id":"1bfea5a2.92164a","type":"openhab2-in2","z":"2775c3f5.a41fec","name":"Humidity Update Stocker","controller":"704230e.a76e75","itemname":"HumidityUpdateStocker","topic":"","initialstate":false,"whenupdated":false,"whencommand":true,"whenchanged":false,"changedfrom":"","changedto":"","x":770,"y":180,"wires":[["d8eeb1e5.f367d"]]},{"id":"b1bd6ef3.686b2","type":"openhab2-in2","z":"2775c3f5.a41fec","name":"Fire Update Stocker","controller":"4897ba12.d9bf9c","itemname":"FireUpdateStocker","topic":"","initialstate":false,"whenupdated":false,"whencommand":true,"whenchanged":false,"changedfrom":"","changedto":"","x":750,"y":300,"wires":[["dbe2ba87.f6528"]]},{"id":"49382c01.7ceaf4","type":"openhab2-in2","z":"2775c3f5.a41fec","name":"Temperature Observe","controller":"ccf3bd64.cb1d58","itemname":"TemperatureObserve","topic":"","initialstate":false,"whenupdated":false,"whencommand":true,"whenchanged":false,"changedfrom":"","changedto":"","x":160,"y":120,"wires":[["b3e8de1a.3871f8"]]},{"id":"b3e8de1a.3871f8","type":"mqtt out","z":"2775c3f5.a41fec","name":"Temp Observe","topic":"cmd/st/0/3303/0/5700/observe","qos":"1","retain":"true","respTopic":"","contentType":"","userProps":"","correl":"","expiry":"","broker":"5812038d.44df74","x":460,"y":120,"wires":[]},{"id":"69ec3a95.4dc964","type":"mqtt out","z":"2775c3f5.a41fec","name":"Hum Observe","topic":"cmd/st/0/3304/0/5700/observe","qos":"1","retain":"true","respTopic":"","contentType":"","userProps":"","correl":"","expiry":"","broker":"5812038d.44df74","x":460,"y":180,"wires":[]},{"id":"c3f6a459.dab07","type":"mqtt out","z":"2775c3f5.a41fec","name":"Light Observe","topic":"cmd/st/0/3301/0/5700/observe","qos":"1","retain":"true","respTopic":"","contentType":"","userProps":"","correl":"","expiry":"","broker":"5812038d.44df74","x":460,"y":240,"wires":[]},{"id":"b35f718c.2ad96","type":"mqtt out","z":"2775c3f5.a41fec","name":"Fire Observe","topic":"cmd/st/0/503/0/5700/observe","qos":"1","retain":"true","respTopic":"","contentType":"","userProps":"","correl":"","expiry":"","broker":"5812038d.44df74","x":450,"y":300,"wires":[]},{"id":"c5e7a235.3d9ee8","type":"openhab2-in2","z":"2775c3f5.a41fec","name":"Humidity Observe","controller":"7c663599.7143b4","itemname":"HumidityObserve","topic":"","initialstate":false,"whenupdated":false,"whencommand":true,"whenchanged":false,"changedfrom":"","changedto":"","x":150,"y":180,"wires":[["69ec3a95.4dc964"]]},{"id":"26cc012.de311fe","type":"openhab2-in2","z":"2775c3f5.a41fec","name":"Light Observe","controller":"23b3aa1c.3dad96","itemname":"LightObserve","topic":"","initialstate":false,"whenupdated":false,"whencommand":true,"whenchanged":false,"changedfrom":"","changedto":"","x":130,"y":240,"wires":[["c3f6a459.dab07"]]},{"id":"264164d5.859064","type":"openhab2-in2","z":"2775c3f5.a41fec","name":"Fire Observe","controller":"4b2f0ee4.434d8","itemname":"FireObserve","topic":"","initialstate":false,"whenupdated":false,"whencommand":true,"whenchanged":false,"changedfrom":"","changedto":"","x":130,"y":300,"wires":[["b35f718c.2ad96"]]},{"id":"794a7221.3c7c7c","type":"comment","z":"2775c3f5.a41fec","name":"BREWER 1","info":"","x":630,"y":420,"wires":[]},{"id":"c09c0930.1cc3f","type":"comment","z":"2775c3f5.a41fec","name":"BREWER 2","info":"","x":730,"y":660,"wires":[]},{"id":"ddc7ddeb.57a808","type":"openhab2-in2","z":"2775c3f5.a41fec","name":"Temperature Observer Brewer 1","controller":"affb6bc2.40193","itemname":"TemperatureObserverBrewer0","topic":"","initialstate":false,"whenupdated":false,"whencommand":true,"whenchanged":false,"changedfrom":"","changedto":"","x":170,"y":500,"wires":[["843bbfcc.dc3a4"]]},{"id":"2924cda.c3dceb2","type":"mqtt out","z":"2775c3f5.a41fec","name":"Temp Observe Brewer 1","topic":"cmd/br/0/3303/0/5700/observe","qos":"1","retain":"true","respTopic":"","contentType":"","userProps":"","correl":"","expiry":"","broker":"b750acbb.e73dc8","x":590,"y":500,"wires":[]},{"id":"1e14b6cb.bb4949","type":"openhab2-in2","z":"2775c3f5.a41fec","name":"Temperature Update Brewer 1","controller":"c3c251f1.7816a","itemname":"TemperatureUpdateBrewer0","topic":"","initialstate":false,"whenupdated":false,"whencommand":true,"whenchanged":false,"changedfrom":"","changedto":"","x":860,"y":500,"wires":[["4d521b80.d5d224"]]},{"id":"4d521b80.d5d224","type":"mqtt out","z":"2775c3f5.a41fec","name":"Request Temperature Brewer 1","topic":"cmd/br/0/3303/0/5700","qos":"0","retain":"false","respTopic":"","contentType":"","userProps":"","correl":"","expiry":"","broker":"b750acbb.e73dc8","x":1130,"y":500,"wires":[]},{"id":"715cf97.3306408","type":"openhab2-in2","z":"2775c3f5.a41fec","name":"Temp Observe Brewer 2","controller":"a9aa7cb9.4370f","itemname":"TemperatureObserverBrewer1","topic":"","initialstate":false,"whenupdated":false,"whencommand":true,"whenchanged":false,"changedfrom":"","changedto":"","x":170,"y":720,"wires":[["fd4960ea.97ace"]]},{"id":"b689e434.62547","type":"mqtt out","z":"2775c3f5.a41fec","name":"Temp Observe Brewer 2","topic":"cmd/br/10/3303/0/5700/observe","qos":"1","retain":"true","respTopic":"","contentType":"","userProps":"","correl":"","expiry":"","broker":"b750acbb.e73dc8","x":510,"y":720,"wires":[]},{"id":"85ba0395.1a067","type":"openhab2-in2","z":"2775c3f5.a41fec","name":"Temperature Update Brewer 2","controller":"3c6112ae.ab84b6","itemname":"TemperatureUpdateBrewer1","topic":"","initialstate":false,"whenupdated":false,"whencommand":true,"whenchanged":false,"changedfrom":"","changedto":"","x":800,"y":720,"wires":[["a971515e.2933e8"]]},{"id":"a971515e.2933e8","type":"mqtt out","z":"2775c3f5.a41fec","name":"Request Temperature Brewer 2","topic":"cmd/br/10/3303/0/5700","qos":"0","retain":"false","respTopic":"","contentType":"","userProps":"","correl":"","expiry":"","broker":"b750acbb.e73dc8","x":1110,"y":720,"wires":[]},{"id":"f80b0c00.8d1ea","type":"mqtt in","z":"1963aa58.852a6e","name":"Response from Brewers","topic":"resp/br/#","qos":"1","datatype":"json","broker":"b750acbb.e73dc8","nl":false,"rap":false,"rh":"1","x":140,"y":640,"wires":[["ca8db3cc.56fae"]]},{"id":"ca8db3cc.56fae","type":"function","z":"1963aa58.852a6e","name":"Alarm status Check","func":"let topic = msg.topic;\nlet array = topic.split('/');\nlet device = array[2];\nlet object = array[3];\nlet objInstance = array[4];\nlet resource = array[5];\nlet result = null;\n\nif(object==\"3\") {\n    /* Stiamo ricevendo un responso di reboot da una delle due\n    schede */\n    if(resource==\"4\"){\n        let value = msg.payload.v;\n        if(value == \"rebooted\" ) {\n            let ledVariable = \"brewer_\"+device+\"_tempAlarm\";\n            flow.set(ledVariable, false);\n            result = {\n                payload : {\n                    devInstance: device,\n                    value: \"ON\"\n                }\n            };\n        }   \n    }\n    else if(resource==\"11\") {\n        let value = msg.payload.error;\n        if(value==2) {\n            result = {\n                payload : {\n                    devInstance: device,\n                    value: \"OFF\"\n                }\n            }\n        }\n    }\n} \nreturn result;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":370,"y":640,"wires":[["7fdd714d.3f1b58","6359c448.5f3204"]]},{"id":"d44074b4.983c7","type":"change","z":"1963aa58.852a6e","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.value","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":635,"y":300,"wires":[["6931b894.6f63"]],"l":false},{"id":"6931b894.6f63","type":"openhab2-out2","z":"1963aa58.852a6e","name":"Temperature Brewer 1","controller":"2ec1b963.5cbe8e","itemname":"temperatureBewer0","topic":"ItemCommand","payload":"","onlywhenchanged":false,"x":780,"y":300,"wires":[]},{"id":"ea686a64.1963c8","type":"change","z":"1963aa58.852a6e","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.value","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":635,"y":340,"wires":[["219e031a.1ca1a4"]],"l":false},{"id":"5ce9c5e5.678afc","type":"openhab2-out2","z":"1963aa58.852a6e","name":"Temp Observe 1","controller":"234a1716.59023","itemname":"TemperatureObserverBrewer0","topic":"ItemCommand","payload":"","onlywhenchanged":false,"x":920,"y":580,"wires":[]},{"id":"7fdd714d.3f1b58","type":"switch","z":"1963aa58.852a6e","name":"","property":"payload.devInstance","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"eq","v":"10","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":570,"y":640,"wires":[["71655fc7.b68498"],["7c96a9e4.2e5eb"]]},{"id":"31361c85.4d7724","type":"openhab2-out2","z":"1963aa58.852a6e","name":"Temp Observe 2","controller":"854b7586.a42ea","itemname":"TemperatureObserverBrewer1","topic":"ItemCommand","payload":"","onlywhenchanged":false,"x":920,"y":700,"wires":[]},{"id":"71655fc7.b68498","type":"change","z":"1963aa58.852a6e","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.value","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":715,"y":580,"wires":[["5ce9c5e5.678afc"]],"l":false},{"id":"7c96a9e4.2e5eb","type":"change","z":"1963aa58.852a6e","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.value","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":715,"y":700,"wires":[["31361c85.4d7724"]],"l":false},{"id":"ef18e0d0.78e21","type":"debug","z":"2775c3f5.a41fec","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":430,"y":800,"wires":[]},{"id":"843bbfcc.dc3a4","type":"function","z":"2775c3f5.a41fec","name":"","func":"let value = msg.payload;\n\nmsg.payload = {\n    \"v\" : value\n}\n\n//msg.payload = \"\\\"v\\\":\\\"\"+value+\"\\\"\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":355,"y":500,"wires":[["2924cda.c3dceb2","fdb45c2.34be22"]],"icon":"node-red/swap.svg","l":false},{"id":"fd4960ea.97ace","type":"function","z":"2775c3f5.a41fec","name":"","func":"let value = msg.payload;\n\nmsg.payload = {\n    \"v\" : value\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":335,"y":720,"wires":[["b689e434.62547","ef18e0d0.78e21"]],"icon":"node-red/swap.svg","l":false},{"id":"574a9ec4.4df308","type":"mqtt out","z":"2775c3f5.a41fec","name":"Temp Observe","topic":"cmd/br/10/3303/0/5700/observe","qos":"1","retain":"false","broker":"5812038d.44df74","x":680,"y":1480,"wires":[]},{"id":"f7053152.577428","type":"inject","z":"2775c3f5.a41fec","name":"On","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"v\":\"ON\"}","payloadType":"json","x":450,"y":1460,"wires":[["574a9ec4.4df308"]]},{"id":"51337f94.b5586","type":"inject","z":"2775c3f5.a41fec","name":"Off","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"v\":\"OFF\"}","payloadType":"json","x":450,"y":1500,"wires":[["574a9ec4.4df308"]]},{"id":"fdb45c2.34be22","type":"debug","z":"2775c3f5.a41fec","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":450,"y":580,"wires":[]},{"id":"d6f7d227.ff3d5","type":"debug","z":"1963aa58.852a6e","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":350,"y":500,"wires":[]},{"id":"6863f0c2.a0cdf8","type":"influxdb out","z":"1963aa58.852a6e","influxdb":"f3cd2a9e.2c85e","name":"BrewIoTDB","measurement":"temperatureBrewer","precision":"s","retentionPolicy":"","database":"database","precisionV18FluxV20":"ms","retentionPolicyV18Flux":"","org":"organisation","bucket":"bucket","x":770,"y":460,"wires":[]},{"id":"2f8d9298.7b5856","type":"function","z":"1963aa58.852a6e","name":"Handle Leds Br 1","func":"let green = \"\";\nlet red = \"\";\nlet value = msg.payload.value;\n\nswitch(value) {\n    case \"ON\" : \n        green.payload = true;\n        red.payload = false;\n        break;\n    case \"OFF\" : \n        green.payload = false;\n        red.payload = true;\n        break;\n    default:\n        green.payload = false;\n        red.payload = false;\n        break;\n}\n\nreturn [green, red];","outputs":2,"noerr":0,"initialize":"","finalize":"","libs":[],"x":530,"y":820,"wires":[["747c90da.8bfe8"],["17ec7ec8.c197c9"]]},{"id":"747c90da.8bfe8","type":"rpi-gpio out","z":"1963aa58.852a6e","name":"Green Led Brewer 1","pin":"11","set":true,"level":"0","freq":"","out":"out","x":820,"y":780,"wires":[]},{"id":"17ec7ec8.c197c9","type":"rpi-gpio out","z":"1963aa58.852a6e","name":"Red Led Brewer 1","pin":"12","set":true,"level":"0","freq":"","out":"out","x":810,"y":840,"wires":[]},{"id":"f365cf54.9e6e9","type":"rpi-gpio out","z":"1963aa58.852a6e","name":"Green Led Brewer 2","pin":"15","set":true,"level":"0","freq":"","out":"out","x":820,"y":920,"wires":[]},{"id":"246ef210.6dacfe","type":"rpi-gpio out","z":"1963aa58.852a6e","name":"Red Led Brewer 2","pin":"16","set":true,"level":"0","freq":"","out":"out","x":810,"y":980,"wires":[]},{"id":"6359c448.5f3204","type":"switch","z":"1963aa58.852a6e","name":"","property":"payload.devInstance","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"eq","v":"10","vt":"num"}],"checkall":"true","repair":false,"outputs":2,"x":315,"y":880,"wires":[["2f8d9298.7b5856"],["bfaabb67.079608"]],"outputLabels":["Brewer 1","Brewer 2"],"l":false},{"id":"bfaabb67.079608","type":"function","z":"1963aa58.852a6e","name":"Handle Leds Br 2","func":"let green = \"\";\nlet red = \"\";\nlet value = msg.payload.value;\n\nswitch(value) {\n    case \"ON\" : \n        green.payload = true;\n        red.payload = false;\n        break;\n    case \"OFF\" : \n        green.payload = false;\n        red.payload = true;\n        break;\n    default:\n        green.payload = false;\n        red.payload = false;\n        break;\n}\n\nreturn [green, red];","outputs":2,"noerr":0,"initialize":"","finalize":"","libs":[],"x":530,"y":940,"wires":[["f365cf54.9e6e9"],["246ef210.6dacfe"]]}]
